#!/bin/bash

function huong_dan(){
Viá»‡c kiá»ƒm tra dung lÆ°á»£ng cÃ¡c thÆ° má»¥c lá»›n nháº¥t trong mÃ£ nguá»“n website lÃ  má»™t tÃ¡c vá»¥ quáº£n trá»‹ há»‡ thá»‘ng quan trá»ng, giÃºp báº¡n nhanh chÃ³ng xÃ¡c Ä‘á»‹nh nhá»¯ng thÆ° má»¥c nÃ o Ä‘ang chiáº¿m dá»¥ng nhiá»u khÃ´ng gian Ä‘Ä©a nháº¥t trÃªn mÃ¡y chá»§.

ðŸŽ¯ Má»¥c Ä‘Ã­ch chÃ­nh:
 * XÃ¡c Ä‘á»‹nh Nguá»“n Gá»‘c Chiáº¿m Dung LÆ°á»£ng: Khi á»• cá»©ng gáº§n Ä‘áº§y, viá»‡c nÃ y giÃºp báº¡n tÃ¬m ra cÃ¡c Ä‘iá»ƒm nÃ³ng â€“ nhá»¯ng thÆ° má»¥c gá»‘c rá»… chá»©a nhiá»u dá»¯ liá»‡u nháº¥t [vÃ­ dá»¥: thÆ° má»¥c backups, thÆ° má»¥c logs, thÆ° má»¥c chá»©a nhiá»u website, hoáº·c thÆ° má»¥c home cá»§a ngÆ°á»i dÃ¹ng nÃ o Ä‘Ã³].
 * Dá»n dáº¹p CÃ³ Má»¥c tiÃªu: Thay vÃ¬ tÃ¬m tá»«ng file láº», viá»‡c xÃ¡c Ä‘á»‹nh thÆ° má»¥c lá»›n cho phÃ©p báº¡n táº­p trung dá»n dáº¹p hoáº·c tá»‘i Æ°u hÃ³a khÃ´ng gian lÆ°u trá»¯ má»™t cÃ¡ch hiá»‡u quáº£ hÆ¡n.
 * Hiá»ƒu Cáº¥u trÃºc Sá»­ dá»¥ng ÄÄ©a: Cung cáº¥p cÃ¡i nhÃ¬n tá»•ng quan vá» cÃ¡ch dung lÆ°á»£ng á»• cá»©ng Ä‘Æ°á»£c phÃ¢n bá»• giá»¯a cÃ¡c thÆ° má»¥c khÃ¡c nhau.
 * Báº£o trÃ¬ Há»‡ thá»‘ng Äá»‹nh ká»³: LÃ  má»™t pháº§n cá»§a viá»‡c kiá»ƒm tra sá»©c khá»e mÃ¡y chá»§, giÃºp ngÄƒn cháº·n tÃ¬nh tráº¡ng háº¿t dung lÆ°á»£ng Ä‘á»™t ngá»™t.

âœ¨ Táº¡i sao láº¡i quan trá»ng?
TrÃªn mÃ¡y chá»§, Ä‘áº·c biá»‡t lÃ  mÃ¡y chá»§ web Ä‘Æ°á»£c quáº£n lÃ½ báº±ng cÃ¡c script nhÆ° WPTangToc OLS, viá»‡c cÃ¡c thÆ° má»¥c [nhÆ° thÆ° má»¥c chá»©a uploads, backups, hoáº·c logs] phÃ¬nh to khÃ´ng kiá»ƒm soÃ¡t cÃ³ thá»ƒ nhanh chÃ³ng lÃ m cáº¡n kiá»‡t dung lÆ°á»£ng á»• cá»©ng, áº£nh hÆ°á»Ÿng Ä‘áº¿n hoáº¡t Ä‘á»™ng cá»§a website vÃ  cÃ¡c dá»‹ch vá»¥ khÃ¡c. Kháº£ nÄƒng xÃ¡c Ä‘á»‹nh nhanh cÃ¡c thÆ° má»¥c nÃ y lÃ  ráº¥t cáº§n thiáº¿t.

TÃ³m láº¡i, kiá»ƒm tra dung lÆ°á»£ng thÆ° má»¥c lá»›n nháº¥t lÃ  má»™t ká»¹ nÄƒng quáº£n trá»‹ Linux cÆ¡ báº£n giÃºp báº¡n duy trÃ¬ sá»± á»•n Ä‘á»‹nh vÃ  hiá»‡u quáº£ cho khÃ´ng gian lÆ°u trá»¯ cá»§a mÃ¡y chá»§.
}


echo ""
echo ""
echo ""
echo "========================================================================="
echo "|Quáº£n lÃ½ disk => Kiá»ƒm tra dung lÆ°á»£ng thÆ° má»¥c lá»›n nháº¥t cá»§a website       |"
echo "========================================================================="
echo ""
. /etc/wptt/tenmien
echo ""
echo ""
echo "Lá»±a chá»n website kiá»ƒm tra thÆ° má»¥c lá»›n nháº¥t: "
echo ""
lua_chon_NAME

if [[ $NAME = '' || $NAME = '0' ]];then
	. /etc/wptt/wptt-disk-main 1
fi

path="/usr/local/lsws/$NAME/html"
find $path -not -path "/proc/*" -type d -exec du -Sh {} + 2>/dev/null | sort -rh | uniq | head -n 15

echo "Kiá»ƒm tra dung lÆ°á»£ng thÆ° má»¥c lá»›n nháº¥t cá»§a website $NAME : $(date '+%d-%m-%Y %H:%M')" >> /var/log/wptangtoc-ols.log

check_menu_wptangtoc_active=$1
if [[ $check_menu_wptangtoc_active = "98" ]];then
	. /etc/wptt/wptt-disk-main 1
fi




